{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <div class="card shadow-lg">
        <div class="card-header bg-primary text-white">
            <h2 class="text-center">{{ trip.trip_name }}</h2>
        </div>
        <div class="card-body">
            <p><strong>Destination:</strong> {{ trip.location.country }}</p>
            <p><strong>Cities:</strong> {{ trip.location.get_cities_list|join:", " }}</p>
            <p><strong>Start Date:</strong> {{ trip.start_date }}</p>
            <p><strong>End Date:</strong> {{ trip.end_date }}</p>
            <p><strong>Duration:</strong> {{ trip.duration_days }} days</p>
            <p><strong>Budget:</strong> â‚¬{{ trip.budget.budget }}</p>
            <p><strong>Accommodation Type:</strong> {{ trip.details.get_accommodation_type_display }}</p>
            <p><strong>Transport Type:</strong> {{ trip.details.get_transport_type_display }}</p>

            {% if trip.itinerary_days.all %}
            <hr>
            <h4>Itinerary</h4>
            <ul class="list-group">
                {% for day in trip.itinerary_days.all %}
                <li class="list-group-item">
                    <h5>Day {{ day.day_number }} {% if day.date %} ({{ day.date }}) {% endif %}</h5>
                    {% if day.morning %}<p><strong>Morning:</strong> {{ day.morning }}</p>{% endif %}
                    {% if day.afternoon %}<p><strong>Afternoon:</strong> {{ day.afternoon }}</p>{% endif %}
                    {% if day.evening %}<p><strong>Evening:</strong> {{ day.evening }}</p>{% endif %}
                </li>
                {% empty %}
                <p>No itinerary details available.</p>
                {% endfor %}
            </ul>
            {% endif %}
            
            <div class="mt-4">
                <a href="{% url 'my_trips' %}" class="btn btn-secondary">Back to My Trips</a>
                <form action="{% url 'delete_trip' trip.id %}" method="post" class="d-inline">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger"
                        onclick="return confirm('Are you sure you want to delete this trip?');">
                        Delete Trip
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
